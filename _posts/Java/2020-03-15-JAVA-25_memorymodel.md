---
title: "[Java] 자바 메모리 모델"
categories:
  - Java
read_time: false
tags:
  - Java
comments:
  - true
toc: true
toc_sticky: true
---
자바 가상머신의 메모리 관리 방식을 가리켜 __자바 메모리 모델__ 이라고 한다.

이번 포스팅에서는 가상머신이 메모리를 관리하는 방식에 대해 공부한 내용을 적어보려한다.

## 자바 가상머신의 메모리 모델
자바 가상머신(JVM)은 운영체제 위에서 실행되는 하나의 프로그램이라고 할 수 있다. 그러므로, 가상머신의 실행에 필요한 메모리는 메인 메모리 즉 물리적으로 램에서 제공한다.

자바 가상머신은 운영체제로부터 할당 받은 메모리를 효율적으로 사용할 수 있도록 고민해야 한다.

메모리를 효율적으로 사용하기 위해 자바 가상머신은 3개의 공간으로 나누어 메모리 공간을 사용한다.

1. 메소드 영역(Method Area)
2. 스택 영역(Stack Area)
3. 힙 영역(Heap Area)

## 메소드 영역(Method Area)
메소드 영역은 특정 클래스의 정보가 메모리 공간에 올려질 때 채워지는 영역이다.

메인 메소드에서 클래스 변수(static 변수)에 접근하거나, 인스턴스를 생성하기 위해서는 클래스의 바이트 코드가 메모리 공간에 로딩이 되어야 하는데 이때 로딩되는 메모리 공간이 메소드 영역이다.


## 스택 영역(Stack Area)
스택 영역은 메소드 수행 시마다 프레임이 할당되어 메소드 수행에 필요한 변수나, 중간 결과 값을 임시 기억 하는 곳이다. 메소드가 종료 시 할당 메모리는 자동 제거된다.

즉, 스택 영역은 지역변수와 매개변수가 저장되는 공간이고, 이 둘은 중괄호로 구분되는 지역 내에서만 유효한 변수들이다.

중괄호 내에 할당된 이휴에 해당 중괄호를 벗어나면 바로 소멸되는 특성의 데이터를 저장하기 위한 영역을 스택 영역이라 한다.

## 힙 영역(Heap Area)
인스턴스는 힙 영역에 할당된다. 인스턴스를 스택이 아닌 힙에 할당하는 이유는 인스턴스의 소멸 시점과 소멸 방법이 지역변수와 다르기 때문이다.

힙에 생성된 인스턴스의 소멸 시기는 가상머신이 판단하여 소멸시킨다.

가상머신이 판단하여 소멸을 하는 방식을 가리켜 가비지 컬렉션(Garbage Collection)이라 한다. 

즉, 힙 영역은 가상머신에 의한 가비지 컬렉션이 일어나는 메모리 공간을 의미한다.

다만 인스턴스가 가비지 컬렉션의 대상이 되었다고 해서 바로 소멸이 일어나는 것은 아니다. 가비지 컬렉션의 실행 타이밍은 시스템 성능에 영향을 미치지 않는 방향에서, 별도의 알고리즘으로 계산되어 수행된다.

## 출처
__윤성우의 열혈 Java 프로그래밍, 오렌지 미디어__
