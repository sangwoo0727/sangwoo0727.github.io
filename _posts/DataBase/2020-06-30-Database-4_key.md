---
title: "[데이터베이스] 논리적 데이터 모델 - 키의 종류"
categories:
  - DataBase
tags:
  - DataBase
comments:
  - true
read_time: false
toc: true
toc_sticky: true
---
이전 포스팅에서 우리는 논리적 데이터 모델 중 많이 사용되는 관계 데이터 모델에 대한 개념을 알아보았다.

이 중 키에 대한 이야기는 이번 포스팅에서 진행하려한다.

관계 데이터 모델의 릴레이션의 네가지 특징 중 __튜플의 유일성__ 과 키는 밀접한 관련이 있다.

튜플의 유일성은 릴레이션에 똑같은 튜플이 존재하면 안되고, 모든 튜플에는 다른 튜플과 구별되는 유일한 특성이 있어야 된다는 것이었다.

튜플을 유일하게 구별하기 위해 모든 속성을 이용하는 것보다 일부 속성만 이용하는 것이 효율성을 높일 수 있다. 이 때, 튜플들을 유일하게 구별해주는 역할은 속성 또는 속성들의 집합인 __키__ 가 한다.

그럼 키에 대해 들어가보자!

관계 데이터 모델에서는 키를 __슈퍼키, 후보키, 기본키, 대체키, 외래키__ 다섯 가지로 분류한다.

## 슈퍼키(Super Key)
슈퍼키는 유일성의 특성을 만족하는 속성 또는 속성들의 집합이다. 유일성은 키가 갖추어야 하는 기본 특성으로, 하나의 릴레이션에서 키로 지정된 속성 값은 튜플마다 달라야한다는 의미이다.

사용자 릴레이션에서 사용자의 아이디에 대해 생각해보자. 사용자 아이디 속성은 모든 사용자 튜플마다 값이 달라야하고, 이를 통해 튜플들과 유일하게 구별할 수 있으므로 슈퍼키라고 할 수 있다.

반면, 사용자의 이름 속성은 이름이 같은 사용자도 있을 수 있으므로 슈퍼키가 될 수 없다.

하지만 사용자 아이디 + 사용자 이름으로 구성된 속성 집합은 어떨까? 사용자 아이디만으로도 모든 튜플들을 구별할 수 있으므로 사용자 아이디+ 사용자 이름으로도 모든 튜플을 구별할 수 있다.

그렇기 때문에, 사용자 아이디+사용자 이름 속성 집합 역시 슈퍼키가 될 수 있다.

이때, 사용자아이디+사용자 이름 속성 집합은 사용자 아이디만으로도 모든 튜플을 구별할 수 있지만 불필요한 속성 값까지 확인하는 비효율적인 작업을 하게 된다.

## 후보키(Candidate Key)
바로 위에서 언급한 것처럼 슈퍼키 중에는 불필요한 속성 값까지 확인하는 비효율적인 작업을 하게되는 키가 존재한다. 그래서 꼭 필요한 속성의 집합만으로 튜플을 유일하게 구별할 수 있도록 하는 키가 __후보키__ 이다.

후보키는 유일성을 만족시키면서 동시에 최소성까지 만족하는 속성 또는 속성들의 집합이다. 최소성은 위에서 말한 것처럼 꼭 필요한 최소한의 속성들로만 키를 구성하여 튜플을 구별할 수 있게 하는 것을 말한다.

즉, 슈퍼키 중에서 최소성을 만족하는 것이 후보키가 된다.

후보키가 되기 위해 만족해야 하는 유일성과 최소성의 특성은 새로운 튜플이 삽입되거나 기존 튜플의 속성 값이 바뀌어도 유지되어야 한다. 

## 기본키(Primary Key)
후보키는 하나의 릴레이션에서 여러개가 있을 수 있다. 하지만 릴레이션에서 튜플을 구별하기 위해 여러 개의 후보키를 모두 사용할 필요는 없다.

여러 후보키 중에서 기본적으로 사용할 키를 반드시 선택해야 하는데 이것을 기본키라고 한다.

기본키를 선택할 때 고려해야할 기준을 알아보자.

__첫 째로, 널 값을 가질 수 있는 속성이 포함된 후보키는 기본키로 부적합하다.__ 
기본키가 널 값인 튜플은 다른 튜플들과 구별하여 접근하기 어려우므로 이런 가능성이 있는 키는 기본키로 선택하지 않는 것이 좋다.

__두 번째로, 값이 자주 변경될 수 있는 속성이 포함된 후보키는 기본키로 부적합하다.__
기본키는 다른 튜플과 구별되는 값을 가지고 널 값은 허용하지 않으므로 이를 확인하는 작업이 필요한데, 만약 값이 자주 바뀐다면 기본키 값으로 적합한지를 지속해서 판단해야 하기때문에 기본키로 부적합하다.

__세 번째로, 단순한 후보키를 기본키로 선택한다.__
이 부분에 대해서는 특별한 언급을 하지 않아도 모두들 이해할 거라고 생각한다.

## 대체키(Alternate Key)
대체키는 기본키로 선택되지 못한 후보키들이다. 대체키는 기본키를 대신할 수 있다. 하지만 기본키로 선택되지 못한 이유들이 존재한다.

## 외래키(Foreign Key)
외래키는 어떤 릴레이션에 소속된 속성 또는 속성 집합이 다른 릴레이션의 기본키가 되는 키다. 즉, 다른 릴레이션의 기본키를 그대로 참조하는 속성의 집합이다.

외래키는 릴레이션들 사이의 관계를 올바르게 표현하기 위해 필요하다.

다만 외래키가 되는 속성과 기본키가 되는 속성의 이름은 달라도 된다. 하지만 외래키 속성의 도메인과 참조되는 기본키 속성의 도메인은 반드시 같아야한다.

하나의 릴레이션에는 외래키가 여러 개 존재할 수도 있고, 외래키를 기본키로 사용할 수도 있고 외래키를 포함하여 기본키를 구성할 수도 있다.

![](/assets/img/DataBase/20200701_1.jpeg)

추가로, 외래키는 반드시 다른 릴레이션을 참조할 필요는 없다. 참조하는 릴레이션과 참조되는 릴레이션이 같을 수도 있다.

외래키는 기본적으로는 기본키가 아니기 때문에 널 값을 가질 수도 있고 서로 다른 튜플이 같은 값을 가질 수도 있다.

## 출처
__데이터베이스 개론 2판, 한빛아카데미__