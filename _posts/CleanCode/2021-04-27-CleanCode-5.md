---
title: "CleanCode 4. 주석"
categories:
  - CleanCode
read_time: false
tags:
  - CleanCode
comments:
  - true
toc: true
toc_sticky: true
---
> 이 포스팅은 로버트 C.마틴의 클린코드를 읽은 후 작성하였습니다.

## 들어가기 전
* 회사에서 리뷰를 받기 전까지 나는 주석에 대해 항상 긍정적으로만 생각했었다.
* 주석이 달린 코드는 성실함을 표현하고, 친절하다고 생각했다.
* 하지만 멘토님께 리뷰를 받으며, 다시 한번 생각해볼 수 있는 기회가 있었다.
* __가장 좋은 코드는 주석이 필요 없는 코드다.__
* 주석이 없는 코드가 좋은 코드라는 것이 아니라, 주석이 필요 없는 코드가 좋은 코드라는 것이다.
* 어쩔 수 없이 주석을 달아야 하는 상황이 생긴다면, 코드가 수정되는 시점에 꼭 주석도 함께 업데이트를 해주자.
* 이 정도를 생각해보며 클린 코드에서 주석을 어떻게 생각하는지 포스팅을 시작해보겠다.

## 개요
* 프로그래밍 언어 자체가 표현력이 풍부하다면, 주석은 필요하지 않다.
* __우리는 코드로 의도를 표현하지 못해서 실패를 만회하기 위해서 주석을 사용한다.__
* 주석이 필요한 상황이 생길때마다, 코드로 의도를 표현할 수 있는 방법이 없을까라는 고민을 해보자.
* 코드는 변하고 진화하지만, 주석은 코드를 따라가지 못한다.
* 저자는 주석이 코드에서 분리되어 점점 더 부정확한 고아로 변하는 사례를 많이 봤다고 한다.
* __진실은 코드에만 존재한다.__

## 주석은 나쁜 코드를 보완하지 못한다.
* 코드에 주석을 추가하는 일반적인 이유는 코드 품질이 나쁘기 때문이다.
* 표현력이 풍부하고, 깔끔하며 주석이 없는 코드가 복잡하고 어수선하고 주석이 많이 달린 코드보다 훨씬 좋다.
* 이런 경험은 많이 있는 것 같다.
* 프로젝트를 하며, 알고리즘 문제를 풀면서, 남들이 이해할 수 있도록, 가까운 미래의 내가 이해할 수 있도록 주석을 달아놓은 경향이 있었다.
* 이해를 빨리 할 수 있는 코드는 주석이 필요없었다.
* 또한 다른 사람의 풀이 코드를 볼때도, 코드가 지저분하다면, 그분이 달아둔 주석은 썩 도움이 되지 않았던 것 같다.
* __코드로 의도를 표현하자.__

## 좋은 주석
* 법적인 주석 (계약 조건, 법적인 정보 등)
* 정보를 제공하는 주석
* 의도를 설명하는 주석
* 의미를 명료하게 밝히는 주석 (인수나 반환 값이 변경하지 못하는 코드에 속한다면, 의미를 명료하게 밝히는 주석은 유용하다.)
* 결과를 경고하는 주석 (스레드에 안전하지 못하다 등등)
* TODO 주석 (TODO 주석은 당장은 구현하기 어려운 업무를 기술한다. 단 주기적으로 점검해서 없애자)
* 중요성을 강조하는 주석 

## 나쁜 주석
* 대다수 주석은 나쁜 주석에 속한다.

### 1. 주절거리는 주석
* 프로세스에서 하라고 해서 마지못해 주석을 다는 것
* 주석을 달기로 결정했으면 충분한 시간을 들여 최고의 주석을 달도록 노력하자.

### 2. 같은 이야기를 중복하는 주석

```java
// this.closed가 true일 때 반환되는 유틸리티 메소드다
// 타임아웃에 도달하면 예외를 던진다.
public synchronized void waitForClose(final long timeoutMillis)
throws Exception {
    if(!closed) {
        wait(timeoutMillis);
        if(!closed) {
            throw new Exception("MockResponseSender could not be closed");
        }
    }
}
```

* 주석이 코드보다 더 많은 정보를 제공하지 못하고 있다.
* 코드를 정당화하는 주석도 아니고, 의도나 근거를 설명하는 주석도 아니다.

### 3. 오해할 여지가 있는 주석
* 위의 코드에서는 오해할 여지가 있다.
* this.closed가 true로 변하는 순간 메소드가 반환되는 것이 아니다.
* this.closed가 true여야 메소드가 반환된다.
* 이렇듯, 약간의 잘못된 정보로 인해 오해를 만들 수 있다.

### 4. 의무적으로 다는 주석
* 모든 함수에 Javadocs를 달거나, 모든 변수에 주석을 달아야 한다는 규칙은 정말 잘못된 방식이다.
* 이런 주석은 코드를 복잡하게 만들고, 혼란을 야기한다.

### 5. 있으나 마나 한 주석
* 기본 생성자에 기본 생성자라고 주석을 다는 등의 필요 없는 주석
* 자바 코드를 보면서 기본 생성자를 모르는 사람이 있을까?
* 이렇게 의미없는 주석이 많으면, 개발자는 주석을 점점 더 무시하게 된다.
* 그러면, 결국 나중에 코드가 바뀌며 주석을 수정하지 않는 참사가 벌어지게 된다.

### 6. 함수나 변수로 표현할 수 있다면 주석을 달지 말자
* 이 부분은 설명이 필요한 코드와 일맥상통하는 것 같다.
* 책에 나온 예제를 살펴보자

```java
// 전역 목록 <smodule>에 속하는 모듈이 우리가 속한 하위 시스템에 의존하는가?
if(smodule.getDependSubsystems().contains(subSysmod.getSubSystem())){

}
```

* 주석이 없다면, 이해하기가 좀 오래걸리거나 아예 못할 수 있다.
* 이를 주석이 필요 없도록 코드를 개선하는 것이 좋다.

```java
ArrayList moduleDependees = smodule.getDependSubsystems();
String ourSubSystem = subSysMod.getSubSystem();
if (moduleDependees.contains(outSubSystem)){

}
```

* 이렇게 적으면, 전역목록 smodule에 속하는 모듈 리스트와
* 우리의 하위 시스템,
* 그리고 의존하는지 역시 코드에서 충분히 파악할 수 있다.

### 7. 닫는 괄호에 다는 주석
* 흔히 닫는 괄호에 여기까지가 어떤 괄호인지를 표기하는 주석을 많이 보았다.
* 특히, 알고리즘 풀이에 그런 주석을 많이 본 것 같다.
* 하지만, 이 주석은 명확히 중첩이 심하고, 장황한 함수라는 것을 역설하고 있는 것이다.
* 작고 캡슐화된 코드에는 이 주석이 필요가 없다.
* 즉, 닫는 괄호에 주석을 다는 대신, 함수를 줄이려고 시도해보자.

```java
try {
  while((line = in.readLine()) != null) {
    //..
  } // while
} // try
```

### 8. 공로를 돌리거나 주석을 표시하는 주석
* 이 역시도, 형상관리 시스템에 누가 언제 코드를 추가했는지 다 나온다.
* 즉, 주석으로 누가 작성한건지 코드를 오염시킬 필요가 없다.
* 유용하다고 생각할 수도 있지만, 이런 주석은 점점 코드에 방치되어 부정확하고 쓸모없는 정보로 변하기 쉽다(주석은 코드를 따라가지 못한다.)

### 9. 주석으로 처리한 코드
* 예전에는 주석으로 처리한 코드가 유용했다.
* 하지만 형상관리 시스템이 우리를 대신해 코드를 기억해준다.
* 이제는 주석으로 코드를 처리할 필요가 없다.
* 주석으로 된 코드를 삭제하자

## 정리
* 책에 있는 모든 내용을 정리하진 않았다.
* 하지만 내가 지금껏 프로그래밍을 해오며, 느꼈던 부분이나 한번이라도 접해본 주석, 혹은 내가 사용했던 주석들에 대해 적어보았다.
* 가장 중요한 사실에 대해 다시한번 언급하겠다.
* 주석이 필요없는 코드가 가장 좋은 코드다
* 앞으로도 주석이 장황한 코드, 주석이 있는 코드가 아닌 주석이 필요 없어도 누구나 독해할 수 있는 코드를 만들도록 더욱 노력해야겠다!

## 출처
* Clean Code 애자일 소프트웨어 장인 정신 - 로버트 C.마틴
